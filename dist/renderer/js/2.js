webpackJsonp([2,8],{1506:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),l=r(s),c=n(331),f=n(2473),d=r(f),p=n(16),v=r(p),h=n(395),y=r(h),w=function(e){function t(){var e,n,r,a;i(this,t);for(var u=arguments.length,s=Array(u),l=0;l<u;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={status:"pending"},r.onMount=function(e,t){if(!t||e.fileMeta!==t.fileMeta){var n=e.renderFn;r.setState({status:"pending"}),(0,c.isWebGlSupported)()?n():r.setState({status:"disabled"})}},a=n,o(r,a)}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.onMount(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.onMount(e,this.props)}},{key:"render",value:function(){var e=this.props,t=e.fileMeta,n=e.fileRender,r=this.state.status;return"disabled"===r?l.default.createElement("div",{className:"layout-column layout-align-center-center flex text-center"},l.default.createElement("img",{style:{width:"100px"},src:y.default}),l.default.createElement("div",{className:"text-title-4",style:{marginBottom:"10px"}},"WebGl is disabled or not supported."),l.default.createElement("div",{className:"text-title-5"},"Visit ",l.default.createElement("a",{className:"link-primary",href:"http://get.webgl.org/",target:"_blank"},"webgl.org")," for more.")):n&&n.data?l.default.createElement(d.default,{path:n.data,linkKey:t.fileId}):l.default.createElement("div",{className:"rel-box flex"},l.default.createElement(v.default,{show:!0},n&&n.status?n.status:"Rendering file..."))}}]),t}(l.default.Component);t.default=w},2471:function(e,t){e.exports={preview:"AutodeskLocalViewer_preview-14Tlo",scrollOverlay:"AutodeskLocalViewer_scrollOverlay-13GjC"}},2473:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),l=r(s),c=n(5),f=n(2471),d=r(f),p=n(2474),v=r(p),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"onMount",value:function(e,t){var n=this;if(!t||e.path!==t.path){this.viewer&&this.viewer.deregister&&this.viewer.deregister(),this.viewer=v.default.register(this.refs.cadCanvas,e.linkKey);var r=e.path+"/1/model.svf",i=r.startsWith("http")?r:""+r,o={env:"Local",document:i};e.auth.authToken&&(Autodesk.Viewing.endpoint.HTTP_REQUEST_HEADERS={Authorization:"bearer "+e.auth.authToken}),Autodesk.Viewing.Initializer(o,function(){n.viewer.start(o.document,o)})}}},{key:"componentDidMount",value:function(){this.onMount(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.onMount(e,this.props)}},{key:"componentWillUnmount",value:function(){this.viewer.deregister()}},{key:"render",value:function(){return l.default.createElement("div",{className:d.default.preview+" flex rel-box",ref:"cadCanvas"},l.default.createElement("div",{className:d.default.scrollOverlay}))}}]),t}(s.Component);t.default=(0,c.connect)(function(e){var t=e.auth;return{auth:t}})(h)},2474:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=(0,a.default)(),r=new window.Autodesk.Viewing.Private.GuiViewer3D(e),i=function(){r.resize()};window.addResizeListener(e,i);var o={},l=function(e){var i=s.activeInstances.filter(function(e){return e.linkKey===t&&e.id!==n});if(i.length>=1&&r.viewerState){var a=r.getState(u);i.forEach(function(e){var t=JSON.stringify(o),n=JSON.stringify(a),r=!(n===t);r&&e.restoreState(a,u,!0)}),o=a}},c=function(){var t=s.activeInstances.findIndex(function(e){return e.id===r.id});s.activeInstances.splice(t,1),r.removeEventListener(window.Autodesk.Viewing.CAMERA_CHANGE_EVENT,l),e&&window.removeResizeListener(e,i),r.finish()};return r.id=n,r.linkKey=t,r.deregister=c,r.addEventListener(window.Autodesk.Viewing.CAMERA_CHANGE_EVENT,l),s.activeInstances.push(r),r}Object.defineProperty(t,"__esModule",{value:!0});var o=n(147),a=r(o);n(389);var u={viewport:!0},s={activeInstances:[],register:i};t.default=s}});